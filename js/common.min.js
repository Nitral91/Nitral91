$(document).ready(function () {
    $('.slider-block__slider').slick({
        dots: true,
        arrows: false,
        infinite: true,
        autoplay: true,
        autoplaySpeed: 5000,
        speed: 500,
        fade: true,
        cssEase: 'linear',
        responsive: [
            {
                breakpoint: 767,
                settings: {
                    dots: false
                }
            }
        ]
    });

    $('.winsline-slider').slick({
        infinite: true,
        slidesToShow: 5,
        slidesToScroll: 1,
        swipe: true,
        dots: false,
        arrows: false,
        autoplay: true,
        autoplaySpeed: 1500,
        pauseOnFocus: true,
        responsive: [
            {
                breakpoint: 1240,
                settings: {
                    slidesToShow: 4,
                    slidesToScroll: 1,
                    pauseOnFocus: true
                }
            },
            {
                breakpoint: 999,
                settings: {
                    slidesToShow: 3,
                    slidesToScroll: 1,
                    pauseOnFocus: true
                }
            },
            {
                breakpoint: 767,
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 1,
                    pauseOnFocus: true
                }
            },
            {
                breakpoint: 450,
                settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    pauseOnFocus: true
                }
            }
        ]
    });

    if ($(window).width() < 768) {
        $('.top-games').slick({
            infinite: true,
            slidesToShow: 3,
            slidesToScroll: 1,
            swipe: true,
            dots: false,
            arrows: false,
            autoplay: true,
            autoplaySpeed: 1500,
            pauseOnFocus: true,
            responsive: [
                {
                    breakpoint: 601,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 1
                    }
                }
            ],
        });
    }

    if ($(window).width() > 1200) {
        $('.nav__item.js__dropdown').mouseenter(function () {
            $(this).children('.main-nav__subnav').stop().slideDown();
        });
        $('.nav__item.js__dropdown').mouseleave(function () {
            var obj = $(this);
            setTimeout(function () {
                obj.children('.main-nav__subnav').stop().slideUp();
            }, 1000);
        });
    } else {
        $('a.nav__link').click(function () {
            $('.main-nav__subnav').slideUp();
        });
        $('.js__dropdown').click(function () {
            $(this).children('.main-nav__subnav').slideToggle();
        });
    }

    $('.menu-button').click(function () {
        $('.shadow-layer').fadeToggle();
        $('#sticky').toggleClass('open');
        $(this).toggleClass('open');
    });
    $('.btn_search').click(function () {
        $(this).toggleClass('active');
        $(this).parent('.aside__search').toggleClass('active');
    });


    if ($(window).width() > 1200) {
        var StickyElement = function (node) {
            var doc = $(document),
                fixed = false,
                anchor = node.find('.sticky-anchor'),
                content = node.find('.header__nav');

            var onScroll = function (e) {
                var docTop = doc.scrollTop(),
                    anchorTop = anchor.offset().top;
                if (docTop > anchorTop) {
                    if (!fixed) {
                        anchor.height(content.outerHeight());
                        content.addClass('fixed');
                        fixed = true;
                    }
                } else {
                    if (fixed) {
                        anchor.height(0);
                        content.removeClass('fixed');
                        fixed = false;
                    }
                }
            };

            $(window).on('scroll', onScroll);
        };

        var demo = new StickyElement($('#sticky'));

    }

    $('.cur-lang').click(function () {
        $(this).closest('.language-select').find('.lang-list').slideToggle();
    });
    $('.language-select a').click(function () {
        $('.lang-list').slideUp();
    });


    $(window).scroll(function () {
        if ($(this).scrollTop() > 0) {
            $('.scroller').fadeIn();
        }
        else {
            $('.scroller').fadeOut();
        }
    });

    $('.scroller').click(function () {
        $('body,html').animate({
            scrollTop: 0
        }, 400);
        if ($('.popup_tournamentGames').css('display') == 'block') {
            $('.popup_tournamentGames').animate({
                scrollTop: 0
            }, 400);
        }
        return false;
    });
    $('.bonus-item__more').click(function () {
        var info_block = $(this).closest('.bonus-item').find('.bonus-item__info');
        var main_block = $(this).closest('.bonus-item').find('.front-part');
        info_block.css('max-height', main_block.innerHeight());
        info_block.addClass('active');
        $(this).closest('.bonus-item').find('.bonus-item__info').addClass('active');
    });
    $('.bonus-item__close').click(function () {
        $(this).closest('.bonus-item__info').removeClass('active');
    });
});